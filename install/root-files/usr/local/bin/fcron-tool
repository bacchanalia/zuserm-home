#!/usr/bin/perl
use strict;
use warnings;

my $tab = "/etc/fcrontab";
my $spool = "/usr/local/var/spool/fcron";

sub main(@){
  print "killing fcron and removing spooled tabs\n";
  system "killall", "-9", "fcron";
  system "rm $spool/*";

  print "restarting fcron";
  system "fcron-start";

  print "removing fcrontab\n";
  system "fcrontab", "-r";
  print "loading fcrontab $tab\n";
  system "fcrontab", $tab;
}

&main(@ARGV);
