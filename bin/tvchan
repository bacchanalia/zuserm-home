#!/usr/bin/perl
use strict;
use warnings;

#my $dir = "/media/wolk/Dixflatline";
my $dir = "/media/stuff/Videos/Clips Shorts Trailers";
my @ext = qw(mkv mp4 avi wmv m2ts);

sub main(@){
  my $cmd = "find \"$dir\" -false ";
  for my $ext(@ext){
    $cmd .= " -or -iname *.$ext";
  }
  my @files = `$cmd`;
  while(1){
    my $randIndex = rand @files;
    my $file = $files[$randIndex];
    chomp $file;
    my $dur = `duration -n -s "$file"`;
    chomp $dur;
    my $s = rand() * $dur;
    system "mplayer", "-ss", $s, $file;
  }
}

&main(@ARGV);
